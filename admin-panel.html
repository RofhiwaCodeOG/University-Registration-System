<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VUT iEnabler - Admin Panel</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="dashboard-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="images/vut-logo.jpg" alt="VUT Logo" class="sidebar-logo">
                <h2>VUT iEnabler</h2>
                <p class="sidebar-subtitle">Admin Panel</p>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h3>ADMIN TOOLS</h3>
                    <a href="#" onclick="showSection('dashboard')" class="nav-link active">
                        <span>游늵</span> Dashboard
                    </a>
                    <a href="#" onclick="showSection('students')" class="nav-link">
                        <span>游논</span> Manage Students
                    </a>
                    <a href="#" onclick="showSection('logs')" class="nav-link">
                        <span>游닇</span> Login Logs
                    </a>
                    <a href="#" onclick="showSection('import')" class="nav-link">
                        <span>游닌</span> Import CSV
                    </a>
                    <a href="#" onclick="showSection('settings')" class="nav-link">
                        <span>丘뙖잺</span> Settings
                    </a>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <button onclick="adminLogout()" class="btn-danger btn-block">Logout</button>
            </div>
        </aside>
        
        <main class="main-content">
            <header class="content-header">
                <h1>Admin Dashboard</h1>
                <div class="header-info">
                    <span id="currentDate"></span>
                </div>
            </header>
            
            <!-- Dashboard Section -->
            <div id="dashboardSection" class="content-section">
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Total Students</h3>
                        <p class="stat-number" id="totalStudents">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Total Logins</h3>
                        <p class="stat-number" id="totalLogins">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Successful Logins</h3>
                        <p class="stat-number" id="successfulLogins">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Failed Attempts</h3>
                        <p class="stat-number" id="failedLogins">0</p>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button onclick="exportStudentsToCSV()" class="btn-primary">游닌 Export Students CSV</button>
                    <button onclick="exportLoginLogsToCSV()" class="btn-primary">游닌 Export Login Logs CSV</button>
                </div>
            </div>
            
            <!-- Students Section -->
            <div id="studentsSection" class="content-section" style="display: none;">
                <div class="section-header">
                    <h2>Manage Students</h2>
                    <button onclick="showAddStudentForm()" class="btn-primary">+ Add Student</button>
                </div>
                
                <div id="addStudentForm" style="display: none; margin-bottom: 20px;">
                    <div class="card">
                        <h3>Add New Student</h3>
                        <form id="newStudentForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Student Number</label>
                                    <input type="text" id="newStudentNumber" required>
                                </div>
                                <div class="form-group">
                                    <label>PIN</label>
                                    <input type="text" id="newPin" required maxlength="5">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Full Name</label>
                                <input type="text" id="newName" required>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Email</label>
                                    <input type="email" id="newEmail" required>
                                </div>
                                <div class="form-group">
                                    <label>Cellphone</label>
                                    <input type="tel" id="newCellphone" required>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn-primary">Save Student</button>
                                <button type="button" onclick="hideAddStudentForm()" class="btn-secondary">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Student Number</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Cellphone</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="studentsTableBody">
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Login Logs Section -->
            <div id="logsSection" class="content-section" style="display: none;">
                <div class="section-header">
                    <h2>Login Activity Logs</h2>
                    <button onclick="exportLoginLogsToCSV()" class="btn-primary">游닌 Export CSV</button>
                </div>
                
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Student Number</th>
                                <th>Name</th>
                                <th>Date & Time</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="logsTableBody">
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Import CSV Section -->
            <div id="importSection" class="content-section" style="display: none;">
                <div class="card">
                    <h2>Import Students from CSV</h2>
                    <p>Upload a CSV file with the following format:</p>
                    <code>Student Number,PIN,Name,Gender,Birthdate,ID Number,Email,Cellphone</code>
                    
                    <div class="form-group" style="margin-top: 20px;">
                        <input type="file" id="csvFileInput" accept=".csv" class="file-input">
                    </div>
                    
                    <button onclick="handleCSVImport()" class="btn-primary">Upload and Import</button>
                    
                    <div id="importMessage" class="message" style="display: none; margin-top: 20px;"></div>
                </div>
            </div>
            
            <!-- Settings Section -->
            <div id="settingsSection" class="content-section" style="display: none;">
                <div class="card">
                    <h2>Change Admin Password</h2>
                    <form id="changePasswordForm">
                        <div class="form-group">
                            <label>Current Password</label>
                            <input type="password" id="currentPassword" required>
                        </div>
                        <div class="form-group">
                            <label>New Password</label>
                            <input type="password" id="newPassword" required>
                        </div>
                        <div class="form-group">
                            <label>Confirm New Password</label>
                            <input type="password" id="confirmPassword" required>
                        </div>
                        <button type="submit" class="btn-primary">Change Password</button>
                    </form>
                    <div id="passwordMessage" class="message" style="display: none; margin-top: 20px;"></div>
                </div>
            </div>
        </main>
    </div>
    
    <script src="auth.js"></script>
    <script src="admin.js"></script>
</body>
</html>
