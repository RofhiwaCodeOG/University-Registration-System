<!-- Adding profile photo upload functionality -->
<div class="profile-photo-section">
    <h3>Profile Photo</h3>
    <div class="photo-upload-container">
        <img src="/images/logo.png" alt="Profile Photo" id="profilePhotoPreview" class="profile-photo-large">
        <div class="photo-upload-controls">
            <input type="file" id="photoUpload" accept="image/*" style="display: none;">
            <button type="button" class="btn-primary" onclick="document.getElementById('photoUpload').click()">
                Change Photo
            </button>
            <p class="text-muted">Accepted formats: JPG, PNG (Max 2MB)</p>
        </div>
    </div>
</div>


<script>
document.getElementById('photoUpload').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (!file) return;
    
    // Validate file size (2MB max)
    if (file.size > 2 * 1024 * 1024) {
        alert('File size must be less than 2MB');
        return;
    }
    
    // Validate file type
    if (!file.type.match('image.*')) {
        alert('Please select an image file');
        return;
    }
    
    const reader = new FileReader();
    reader.onload = function(event) {
        const photoDataUrl = event.target.result;
        
        // Update preview
        document.getElementById('profilePhotoPreview').src = photoDataUrl;
        
        // Save to data manager
        const currentUser = dataManager.getCurrentUser();
        if (currentUser) {
            dataManager.updateProfilePhoto(currentUser.studentNumber, photoDataUrl);
            
            // Update current session
            currentUser.profilePhoto = photoDataUrl;
            dataManager.setCurrentUser(currentUser);
            
            // Update sidebar photo
            document.getElementById('sidebarProfilePhoto').src = photoDataUrl;
            
            alert('Profile photo updated successfully!');
        }
    };
    reader.readAsDataURL(file);
});
</script>
